#!/bin/bash

if [ ! -f /tmp/uwsgi-wrapper.pid ]; then
  echo "⚠️ No PID file found"
  exit 1
fi

pid=$(cat /tmp/uwsgi-wrapper.pid)

echo "🔪 Sending SIGINT (Ctrl+C) to PID $pid"
kill -SIGINT "$pid"

sleep 1

if ps -ef | grep '[u]wsgi' | grep '127.0.0.1:9091' > /dev/null; then
  echo "❌ uwsgi still running"
else
  echo "✅ uwsgi terminated cleanly"
fi
