ğŸ§ª full_check_1.sh v1.0
ğŸ•’ 2025-05-15 09:28:45
ğŸ”¢ Commit: 3cc9f2e
ğŸŸ¢ Node: /home/jsbien/.nvm/versions/node/v22.15.0/bin/node
ğŸŸ¢ Node version: v22.15.0
ğŸ§¹ Cleaning up stale .pyc files...
ğŸ” Restarting server...
ğŸ”„ Restarting uwsgi on 127.0.0.1:9091...
ğŸ” Killing uwsgi bound to 127.0.0.1:9091...
ğŸ”ª Killing PID 1698704
ğŸ”ª Killing PID 1698720
âœ… uwsgi terminated cleanly
ğŸš€ Launching new uwsgi via run-uwsgi.sh...
â³ Waiting for server on port 9090...
Logging to uwsgi-20250515-092847.log
Ctrl+C to stop.
âœ… Server is up!
ğŸ“¡ Verifying uwsgi restart via /api/ping...
PONG
HTTP Status: 200
ğŸ“¶ Pinging server...
âœ… Ping succeeded
ğŸ” Running HTML check...
ğŸ§­ Using Chromium binary at: /home/jsbien/.cache/puppeteer/chrome/linux-136.0.7103.49/chrome-linux64/chrome
ğŸŒ Testing URL: http://localhost:9090
âœ… Page loaded successfully with no known errors.
âœ… HTML test passed
ğŸ§¹ Clearing collections table...
âœ… Collections cleared
ğŸ“¡ Running POST check...
Status Code: 200
Response Body:
{"status": "ok"}
âœ… POST test passed
ğŸ“¡ Running GET check...
Status Code: 200
Response Body:
[{"id": 65, "author": null, "title": "Debug Collection 2025-05-15T09:28:49.934005", "subtitle": null, "year": null, "signature": null, "timestamp": "2025-05-15T09:28:49"}]
âœ… GET test passed
ğŸ§ª Running batch_upload_pages_TEST.sh...
[DEBUG] Raw response content-type: text/html
[DEBUG] Raw response text: {"status": "ok"}
[DEBUG] Collection creation response: {'status': 'ok'} (type: <class 'dict'>)
âŒ Batch upload test failed
âŒ One or more tests failed
aphica
2025-05-15 09:28:50,377 [ERROR] [DEBUG] Collection creation response: {'status': 'ok'} (type: <class 'dict'>)
2025-05-15 09:28:50,377 [ERROR] Server returned empty or invalid response when creating collection.
2025-05-15 09:28:50,377 [ERROR] Request payload: title=Polonia Typographica
2025-05-15 09:28:50,377 [ERROR] Response body: {'status': 'ok'}
Traceback (most recent call last):
  File "/home/jsbien/git/glyph-miner/utils/batch_upload_pages.py", line 164, in <module>
    main()
  File "/home/jsbien/git/glyph-miner/utils/batch_upload_pages.py", line 134, in main
    collection_id = find_or_create_collection(args.collection, args.dry_run)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jsbien/git/glyph-miner/utils/batch_upload_pages.py", line 70, in find_or_create_collection
    raise RuntimeError("Collection creation failed unexpectedly. Check backend behavior.")
RuntimeError: Collection creation failed unexpectedly. Check backend behavior.
